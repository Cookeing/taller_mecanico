{% extends "base.html" %} {% block content %}
<h2 class="mb-3">Vehículo: {{ vehiculo.patente }}</h2>
<p>
  <strong>Cliente:</strong> {{ vehiculo.cliente.nombre }} ({{
  vehiculo.cliente.rut }})
</p>
<ul>
  <li><strong>Marca:</strong> {{ vehiculo.marca|default:"-" }}</li>
  <li><strong>Modelo:</strong> {{ vehiculo.modelo|default:"-" }}</li>
  <li><strong>Año:</strong> {{ vehiculo.anio|default:"-" }}</li>
  <li><strong>Chasis:</strong> {{ vehiculo.numero_chasis|default:"-" }}</li>
  <li><strong>Motor:</strong> {{ vehiculo.numero_motor|default:"-" }}</li>
</ul>

<h4>Historial de servicios</h4>
{% if servicios %}
<ul>
  {% for s in servicios %}
  <li>
    {{ s.fecha_servicio|date:"d-m-Y" }} - {{ s.descripcion_trabajo }} {#
    Accedemos a la relación inversa 'documento_set' directamente en el servicio
    's' #} {% with documentos=s.documentos.all %} {% if documentos %}
    <ul>
      {% for d in documentos %}
      <li>
        {{ d.tipo_documento }} - {{ d.fecha_documento|date:"d-m-Y" }} - {{
        d.monto }}
      </li>
      {% endfor %}
    </ul>
    {% endif %} {% endwith %}
  </li>
  {% endfor %}
</ul>
{% else %}
<p>No hay servicios registrados para este vehículo.</p>
{% endif %}

<a href="{% url 'vehiculos:list' %}" class="btn btn-secondary mt-3">Volver</a>
{% endblock %}
